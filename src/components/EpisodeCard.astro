---
import { formatDuration } from '../utils/rss';

const { episode, featured = false } = Astro.props;
---

<article class={`bg-white rounded-lg shadow-md overflow-hidden ${featured ? 'lg:flex' : ''} hover-lift`}>
  <div class={`${featured ? 'lg:w-2/5' : ''}`}>
    <div class="aspect-video relative">
      <img 
        src={episode.image} 
        alt={`${episode.title} - Cover Art`}
        class="w-full h-full object-contain"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent flex items-end p-4">
        <div class="w-full">
          <div class="flex justify-between items-center text-white">
            <span class="bg-primary-500 text-xs font-medium px-2 py-1 rounded-full">
              Episode {episode.episodeNumber || 'New'}
            </span>
            <span class="text-sm">{formatDuration(episode.duration)}</span>
          </div>
          {episode.redmonkUrl && (
            <a 
              href={episode.redmonkUrl} 
              target="_blank" 
              rel="noopener noreferrer" 
              class="text-white text-sm hover:text-primary-300 transition-colors mt-2 inline-block"
            >
              Read on RedMonk â†’
            </a>
          )}
        </div>
      </div>
    </div>
  </div>
  
  <div class={`p-5 ${featured ? 'lg:w-3/5' : ''}`}>
    <div class="text-sm text-gray-500 mb-2">{episode.formattedDate}</div>
    <h3 class={`${featured ? 'text-2xl' : 'text-xl'} font-bold mb-3 text-secondary-800 line-clamp-2`}>
      {episode.title}
    </h3>
    <p class={`text-gray-600 ${featured ? 'mb-6' : 'mb-4'} line-clamp-3`}>
      {episode.summary || episode.contentSnippet}
    </p>
    <div class="flex items-center gap-4">
      <a 
        href={`/episodes/${episode.guid}`} 
        class="text-primary-500 font-medium hover:text-primary-600 flex items-center gap-1 transition-colors"
      >
        Listen Now
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
      </a>
      <button 
        class="text-gray-500 hover:text-gray-700 transition-colors" 
        aria-label="Share episode"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 5l-5 5"/><path d="M15 19l-5-5"/><rect width="5" height="5" x="16" y="2" rx="2"/><rect width="5" height="5" x="16" y="17" rx="2"/><rect width="5" height="5" x="3" y="9.5" rx="2"/></svg>
      </button>
    </div>
  </div>
</article>