---
import { formatDuration } from "../utils/rss";

const { episode, featured = false } = Astro.props;
---

<article
  class={`card ${featured ? "lg:flex" : ""} hover-lift`}
>
  <div class={`${featured ? "lg:w-2/5" : ""} ${featured ? "max-w-full" : "max-w-full"}`}>
    <div class="aspect-video relative">
      <img
        src={episode.image}
        alt={`${episode.title} - Cover Art`}
        class="w-full h-full object-contain"
      />
      <div class="absolute inset-0 flex items-end p-4">
        <div class="w-full">
          <div class="flex justify-between items-center text-white">
            {
              featured && (
                <span class="bg-primary-500 text-xs font-medium px-2 py-1 rounded-full">
                  New Episode
                </span>
              )
            }
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class={`p-4 sm:p-5 ${featured ? "lg:w-3/5" : ""}`}>
    <div class="text-sm text-gray-500 mb-2">{episode.formattedDate}</div>
    <h3
      class={`${featured ? "text-xl md:text-2xl" : "text-lg md:text-xl"} font-bold mb-2 md:mb-3 text-secondary-800 line-clamp-2`}
    >
      {episode.title}
    </h3>
    <p class={`text-gray-600 ${featured ? "mb-4 md:mb-6" : "mb-3 md:mb-4"} line-clamp-2 md:line-clamp-3 text-sm md:text-base`}>
      {episode.summary || episode.contentSnippet}
    </p>
    <div class="flex items-center gap-2 md:gap-4">
      <a
        href={episode.redmonkUrl ||
          `https://www.podserve.fm/series/8338/the-monkcast`}
        target="_blank"
        rel="noopener noreferrer"
        class="btn px-4 py-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white rounded-md flex items-center gap-1 transition-all hover:shadow-lg"
      >
        Listen Now
        <svg
          class="arrow-icon"
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg
        >
      </a>

    </div>
  </div>
</article>

<style>
  .arrow-icon {
    transition: transform 0.3s ease;
  }
  a:hover .arrow-icon {
    transform: translateX(5px);
  }
</style>
